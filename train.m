%data = dataset('File','S:\windows\project\project_data_filter.csv','Delimiter',' ','ReadVarNames',false);
%data = double(data);

numberofdata = numel(data(:,1));
X = data(1:ceil(numberofdata*0.4),2:end);
T = data(1:ceil(numberofdata*0.4),1);
numberoftrainingdata = numel(X(:,1));
numberoffeatures = numel(X(1,:));

totalX = data(:,2:end);
totalT = data(:,1);

for i=1:1160
    runningsum = 0;
    numberofrows = 500;
    for m = 1:numberofrows
        rownum = ceil(rand(1) * numberoftrainingdata);
        runningsum = runningsum + sum(X(rownum,:));
    end
    meanset(i) = runningsum/(numberofrows * numberoffeatures);
end
%meanset = [0.203194013652174,0.206187935260870,0.207406904043478,0.207448104173913,0.207451894434783,0.208466880260870,0.208501352434783,0.210327738695652,0.210968439000000,0.211105515173913,0.212986483260870,0.213181860391304,0.213245990869565,0.213300333391305,0.214459935739130,0.214529468521739,0.215100588913043,0.215311409173913,0.215813218304348,0.216389565391305,0.216558952086957,0.216717172304348,0.216915671956521,0.217007961695652,0.217094566173913,0.217144961913043,0.217736267043478,0.217788446565217,0.217971395869565,0.218269718347826,0.218866138217391,0.218949933956522,0.219154954869565,0.219629136130435,0.219958978869565,0.220169048608696,0.220189251391304,0.220495707086957,0.220733151304348,0.221242435173913,0.221788341000000,0.222193368000000,0.222434565521739,0.222466595130435,0.223578824043478,0.223659484391304,0.224415743130435,0.224770987086956,0.225056448826087,0.226215471130435];
meanset = [0.221754709130435,0.214211724347826,0.220756723913043,0.215869325000000,0.222043378478261,0.209750096956522,0.216671842826087,0.225977926086957,0.217534729565217,0.219881581956522,0.209605964565217,0.220547290434783,0.233075917608696,0.208252379565217,0.189155489347826,0.227424498260870,0.220748080652174,0.205948002608696,0.221105352391304,0.223623187391304,0.221779827391304,0.229729060869565,0.209567014347826,0.224364684347826,0.239220474782609,0.188951968478261,0.224095475217391,0.213121087173913,0.214659855000000,0.213154432173913,0.214722287173913,0.223029090869565,0.235413211739131,0.199502308043478,0.210722627826087,0.210105999347826,0.200884643478261,0.219130040217391,0.211172746739130,0.219233968260870,0.225870985434783,0.221534814782609,0.223330631086957,0.200774083260870,0.217277141956522,0.219333045000000,0.221183510869565,0.205962472608696,0.229251144130435,0.204506290434783,0.206157149347826,0.214659210434783,0.228022804782609,0.214842703695652,0.214513970434783,0.210091747826087,0.237915606086957,0.242129923913043,0.239732320000000,0.226948304782609,0.207365534347826,0.209804755000000,0.201947444565217,0.215136566086957,0.217053452391304,0.205562915652174,0.244026182826087,0.210980692173913,0.228379193913043,0.214454858913043,0.214484734347826,0.240941680869565,0.226049881304348,0.220710040217391,0.218046723695652,0.197863883695652,0.217213155217391,0.220444225652174,0.226339434782609,0.222559388043478,0.209790299130435,0.219781355869565,0.227301769782609,0.217781838478261,0.211003293478261,0.216872932391304,0.220013899782609,0.216996721956522,0.233486336304348,0.210982272173913,0.204384745434783,0.207202452826087,0.226269154782609,0.211375421086957,0.233972681956522,0.214828758478261,0.218953802608696,0.215350146521739,0.204783600217391,0.218241767608696,0.223531703478261,0.202336022173913,0.204505160000000,0.209118245434783,0.202400486304348,0.215591266086957,0.231398094130435,0.227832438695652,0.203566719130435,0.211451379782609,0.219455568913043,0.197828820217391,0.209596153913043,0.204202858260870,0.226928892173913,0.212861349130435,0.209412705652174,0.222763595000000,0.230142125000000,0.219530881739130,0.198314768913044,0.221513826304348,0.210255090217391,0.221803017608696,0.197138136956522,0.214760453913044,0.218893694782609,0.231571271086957,0.219240236739130,0.226419852826087,0.214290989130435,0.219535277826087,0.214200913695652,0.230406512391304,0.201198934347826,0.240279347391304,0.212369393260870,0.223470471521739,0.209721318043478,0.224712880217391,0.212896922826087,0.204520765217391,0.211043579130435,0.214854146304348,0.202815014130435,0.220794296739130,0.215657334130435,0.233185617826087,0.223183786521739,0.201002462826087,0.230328709130435,0.201199213260870,0.241714505869565,0.222076278695652,0.229300343913044,0.209671914782609,0.218326242173913,0.218839445869565,0.220070214565217,0.219483527391304,0.224601988695652,0.211319370217391,0.232875583478261,0.194478129130435,0.206987075217391,0.211576150869565,0.209083324347826,0.227019711521739,0.236971942391304,0.229647449130435,0.194624194347826,0.219410372173913,0.207491207391304,0.234107341956522,0.218280121739131,0.225301546304348,0.216860422391304,0.227184347826087,0.220674045869565,0.217652084782609,0.222109760000000,0.219275716304348,0.229870824565217,0.232293472173913,0.215919189347826,0.212286293913044,0.217158189782609,0.216443767826087,0.229419073478261,0.223176250000000,0.232552508913043,0.210085771521739,0.218220688478261,0.208020777608696,0.235991593695652,0.204341992608696,0.209801313260870,0.219604415869565,0.223620472826087,0.212570804347826,0.216394406739130,0.207147645000000,0.219552432391304,0.196928788913043,0.219153564130435,0.222507209565217,0.196486128260870,0.213643140652174,0.228272170217391,0.221101263043478,0.224552051521739,0.210923219782609,0.211402791086957,0.233659494565217,0.227971418043478,0.230604439565217,0.217226901956522,0.225629952826087,0.198646218478261,0.208742146304348,0.202552647173913,0.215687538478261,0.190361783043478,0.228171690869565,0.226290869347826,0.224433298913044,0.219848071086957,0.226486804782609,0.207794336086957,0.223527253913044,0.222136181086957,0.207678436956522,0.217729801956522,0.218104508913043,0.227408434565217,0.217372290434783,0.221373604565217,0.222112951956522,0.211674350000000,0.228312369130435,0.214797877608696,0.221740525869565,0.218389246086957,0.204751161521739,0.225164022826087,0.223846133478261,0.202252977826087,0.207854007826087,0.212787589130435,0.218781462391304,0.207258485434783,0.228354399347826,0.211155455869565,0.205719176739130,0.211618456521739,0.214556791086957,0.203917682826087,0.227197227173913,0.209891157826087,0.243406803913044,0.216825187826087,0.206554019347826,0.207869593478261,0.213402362391304,0.192814045652174,0.227677058260870,0.228425210000000,0.205720481086956,0.209873169347826,0.208954648043478,0.216250370434783,0.226745201304348,0.217541300000000,0.206440826739130,0.244278146521739,0.219232060869565,0.211977154130435,0.214965870217391,0.223229557391304,0.222971665869565,0.232094273260870,0.229436806521739,0.193763430434783,0.219338438695652,0.220947206521739,0.222684123043478,0.196979637391304,0.217912469130435,0.222819636956522,0.217585575217391,0.210209193478261,0.210205511086956,0.223146053695652,0.220150333478261,0.211221432173913,0.229174088478261,0.228010486304348,0.211653463913043,0.222074471304348,0.211057787826087,0.216834396739130,0.199619973260870,0.212345504130435,0.225599559130435,0.204411337826087,0.208796747826087,0.191080318043478,0.218356311086957,0.214869566304348,0.198937257173913,0.215151559130435,0.230863434130435,0.206438870869565,0.228866405000000,0.218392271521739,0.212276497173913,0.205990305869565,0.211010333478261,0.224306706304348,0.233486265434783,0.217309017826087,0.207292475869565,0.212223785869565,0.213793218913044,0.220262346521739,0.225173284782609,0.229046999347826,0.210914717173913,0.215828902391304,0.239896574347826,0.219276989782609,0.212121349130435,0.194719499565217,0.195896558913044,0.207906561086956,0.228254756086956,0.212095239565217,0.203036615434783,0.199881462826087,0.217471223478261,0.217903354565217,0.214781507173913,0.227985238043478,0.207549366521739,0.239277571086956,0.231444846739130,0.247431602173913,0.206445472173913,0.195918593478261,0.225498637173913,0.225172297608696,0.225897265000000,0.231871008695652,0.195348531739130,0.225707144782609,0.226510455434783,0.208870339347826,0.200007656304348,0.196399299130435,0.236390480217391,0.214983593695652,0.201482842391304,0.224108111304348,0.212505774565217,0.228524175869565,0.217552055434783,0.209872977608696,0.210660037826087,0.225449812826087,0.206867610869565,0.208164423695652,0.223540210000000,0.220937214130435,0.216777784782609,0.221404505652174,0.216952507608696,0.209618571304348,0.218924570652174,0.223011914347826,0.223880387173913,0.227120382391304,0.220551341956522,0.228664513043478,0.200300594782609,0.209288953478261,0.229730328913043,0.208353384782609,0.206127297173913,0.228854438260870,0.222901733913043,0.210464762826087,0.215750348260870,0.197987280217391,0.223463569347826,0.199974344347826,0.217935354130435,0.215663342391304,0.232007368478261,0.225197330434783,0.221837247608696,0.210020648913044,0.208912206956522,0.215586567173913,0.204106482391304,0.216395569130435,0.221446994130435,0.215728419347826,0.223020343043478,0.196847527173913,0.243185851086956,0.209982553478261,0.244458025000000,0.207651204130435,0.190949240217391,0.222086015434783,0.203224006956522,0.212161385869565,0.203432759565217,0.223240362608696,0.230256646086957,0.221983745652174,0.218680618695652,0.241097082173913,0.227123541304348,0.223065337173913,0.216797377391304,0.214751130000000,0.204072428478261,0.232883377391304,0.239390916304348,0.239501781304348,0.225094017608696,0.225726691304348,0.192252917826087,0.229148124565217,0.210475807608696,0.208050892391304,0.213360395652174,0.211305531086957,0.223032983043478,0.188646424130435,0.223710857608696,0.227385356304348,0.219223553913044,0.205422320652174,0.208252964130435,0.225183861086957,0.233372932173913,0.205275589782609,0.195785753695652,0.213284943695652,0.233190752826087,0.199541227826087,0.212031103913044,0.230480961521739,0.213318578260869,0.240501963913043,0.196143079130435,0.219467071086957,0.221610911521739,0.200652857391304,0.214979575217391,0.226480236739130,0.190463413260870,0.241238153260870,0.208906551086956,0.208534358043478,0.220043383260870,0.197647603913043,0.228959176521739,0.213358916956522,0.211939597173913,0.219564498478261,0.217058581521739,0.236109641521739,0.231940576739131,0.206623340434783,0.206180526521739,0.204451687391304,0.228290362173913,0.209724520434783,0.211188795652174,0.221157398695652,0.214322761956522,0.243725799782609,0.222035436739130,0.205218029565217,0.213699788913043,0.211936473043478,0.213561295434783,0.215316803043478,0.216028183695652,0.223885358043478,0.204275043260870,0.255778310652174,0.215801213913044,0.229478750217391,0.187337465434783,0.207714487173913,0.203716470869565,0.186843879782609,0.234374233043478,0.208763423913044,0.196180486739131,0.208367094782609,0.233004368913043,0.223173657608696,0.192498661086957,0.200181739347826,0.241495441956522,0.233170786086957,0.205139574130435,0.214708683913043,0.222109361956522,0.211785436304348,0.233199617826087,0.220924225652174,0.217305876739131,0.229277525434783,0.220635217826087,0.212456760869565,0.208599630000000,0.209144890652174,0.231659000000000,0.230845188913043,0.209380771086957,0.221279268913044,0.222863071086957,0.206888211739131,0.217844953913043,0.218691458043478,0.212924037826087,0.205888866521739,0.203991537173913,0.225767523043478,0.211801964130435,0.218524825652174,0.249052107608696,0.193784672173913,0.213517800217391,0.213136980652174,0.242404553478261,0.212173201521739,0.214070172391304,0.233791984782609,0.230231065000000,0.226621449782609,0.245865193043478,0.226887481739130,0.193414883913043,0.222137333478261,0.210623881521739,0.245276904565217,0.220326504347826,0.219369922608696,0.221286489782609,0.195239871739131,0.220529983695652,0.194395451304348,0.208697381956522,0.200929234347826,0.214685923695652,0.212318888043478,0.214932718695652,0.214709961086956,0.221467570652174,0.203092687826087,0.225501883478261,0.227384923260870,0.205233701956522,0.214603586086956,0.207342847608696,0.231469106739130,0.228043875652174,0.215953541739130,0.209377807173913,0.213328865869565,0.212542299782609,0.222646287391304,0.216101770217391,0.203968196521739,0.198436382826087,0.220631468695652,0.216395512391304,0.231371136739130,0.217552235869565,0.210021297826087,0.227364454782609,0.225892634565217,0.218235418260870,0.213253740434783,0.216127252173913,0.220769357391304,0.204466189565217,0.209097942173913,0.219195971956522,0.202878574565217,0.217045188478261,0.222012003260870,0.230507154782609,0.217933739565217,0.202428536739130,0.215572298043478,0.218655642826087,0.227982842826087,0.228499289782609,0.209413544347826,0.225379564347826,0.210638521521739,0.208653223260870,0.229550630652174,0.216227164782609,0.209085713913043,0.211691121304348,0.246747796086957,0.216113221956522,0.221597429130435,0.217447112173913,0.214360717608696,0.211357823695652,0.215963377826087,0.217351595217391,0.222236118695652,0.213688103913043,0.239260303478261,0.205775366739130,0.229192547391304,0.208095850652174,0.225413093478261,0.213362884782609,0.210665786956522,0.229713970217391,0.205295711521739,0.215804535217391,0.229898065217391,0.248111788043478,0.209490245434783,0.220616482391304,0.215763584347826,0.218910251521739,0.211776622826087,0.224792369130435,0.218885644347826,0.222052761956522,0.222545658695652,0.229863233913043,0.211252438913043,0.212331503913044,0.237731663478261,0.239124533913044,0.222300689565217,0.222050180869565,0.210967273260870,0.222248849565217,0.216658419782609,0.209933718695652,0.236233337173913,0.224507869565217,0.202825055434783,0.212765989347826,0.200987247173913,0.222401181956522,0.203050382608696,0.208985201304348,0.218997905652174,0.214845093260870,0.218087064782609,0.225573307826087,0.210711165434783,0.205157680217391,0.229362672173913,0.202745762608696,0.229727612608696,0.203500606086957,0.256383676739131,0.217813235217391,0.208062445000000,0.225979345434783,0.208628397826087,0.198776731521739,0.242431023043478,0.250323682608696,0.219978169347826,0.233827172173913,0.221371307826087,0.209580488913044,0.223748860869565,0.237082452391304,0.209401105000000,0.214169567173913,0.224545796304348,0.222870329130435,0.197623335652174,0.217502309565218,0.236131909130435,0.224772843913043,0.209550019347826,0.207272330652174,0.195396933695652,0.212450486304348,0.225236227826087,0.239451781521739,0.236098826086957,0.224134449130435,0.230682320869565,0.217165815434783,0.228917724782609,0.234667848913044,0.217550857826087,0.213390203478261,0.202294932826087,0.211952147608696,0.218220057391304,0.214376201956522,0.199267849565217,0.232723893478261,0.200226994347826,0.226258052391304,0.216319992173913,0.213253217391304,0.222932676304348,0.209445830869565,0.219834973695652,0.225693727608696,0.230118971739131,0.227566743260870,0.213987418043478,0.213857911739130,0.211437375652174,0.205190386739130,0.203244960652174,0.220414890217391,0.228435488913044,0.201724391739131,0.238949324565217,0.230308193260869,0.212298443913044,0.207310711956522,0.216650375869565,0.226408764130435,0.217781644565217,0.211779941304348,0.235364780434783,0.216389226956522,0.213578833913044,0.236660160652174,0.206052029347826,0.214428135217391,0.209152231956522,0.202989241086957,0.220242328478261,0.221344452826087,0.203073315652174,0.217003646956522,0.192952287391304,0.216599544565217,0.217623393695652,0.226586439782609,0.219769513260870,0.216584346086957,0.233226454565217,0.206717561739130,0.247828983260870,0.221266955434783,0.207389431086957,0.202010793043478,0.232212778043478,0.211563997826087,0.222959856739130,0.217679384565217,0.219070110434783,0.222557351304348,0.213931808695652,0.221704080217391,0.212503338260869,0.212709159782609,0.241592613913043,0.222299692391304,0.225318974782609,0.222031898043478,0.183625724782609,0.224725584782609,0.211022156521739,0.228050845652174,0.195100338043478,0.196722984565217,0.197647729782609,0.218681415434783,0.197682618913044,0.213420534347826,0.216555433478261,0.204831398913044,0.212122392826087,0.222120786521739,0.213240112173913,0.209566130217391,0.218317015000000,0.201469392173913,0.208730564347826,0.219298725869565,0.228074143913043,0.206356290217391,0.222365334347826,0.204372708695652,0.212270615869565,0.229145105217391,0.223510411739130,0.223962805217391,0.256827615000000,0.217644845217391,0.210690197173913,0.224978836521739,0.223265271086957,0.218959299782609,0.204417410652174,0.210382196304348,0.205184131739130,0.223265914347826,0.204919828695652,0.236005301521739,0.212806956521739,0.234717478043478,0.219498477826087,0.216401319347826,0.215594653913043,0.215133040869565,0.218655469347826,0.217854309347826,0.182391371956522,0.212547795652174,0.232043445434783,0.217173616956522,0.214906609782609,0.242337129347826,0.224759715652174,0.204115256304348,0.221663740217391,0.216171192608696,0.227999706521739,0.225896874347826,0.215505271086957,0.203545895652174,0.207361917608696,0.205876238043478,0.217920161956522,0.237831423913043,0.213213043260870,0.197199874347826,0.206656523695652,0.195023607608696,0.233892989130435,0.213327187608696,0.203991245652174,0.210685160217391,0.197468893260870,0.220652212391304,0.197460245652174,0.225249314782609,0.229880826304348,0.228450048695652,0.211963943695652,0.209399611521739,0.243917438695652,0.212401284130435,0.201742461521739,0.226697333695652,0.214246169347826,0.222262068043478,0.215984341304348,0.213116741521739,0.205186367608696,0.241165808478261,0.220501872391304,0.214387881739130,0.229026442826087,0.214559770000000,0.214682380652174,0.205517279130435,0.235408897391304,0.205928804130435,0.205233009565217,0.209549331956522,0.205597925000000,0.215192351304348,0.245847086739130,0.225899122173913,0.206135116739130,0.220850375217391,0.215480705652174,0.224697956956522,0.225806123043478,0.196268715000000,0.221873847391304,0.216530818913043,0.206545162391304,0.221033940869565,0.219060936304348,0.227395511086957,0.210296125217391,0.223390359347826,0.210525953913044,0.230067079130435,0.222195961521739,0.198435873913044,0.221321952608696,0.230300757608696,0.224282270869565,0.208470150652174,0.215558639130435,0.217545633478261,0.207026598478261,0.206674738478261,0.197666430434783,0.229895072608696,0.218591312826087,0.232528769782609,0.217654981521739,0.208683440652174,0.204907437608696,0.224605109347826,0.223739794782609,0.194798919565217,0.214850980434783,0.212720750434783,0.203901915217391,0.222091294782609,0.204490774565217,0.213476266086956,0.230600073695652,0.227930000869565,0.222716235000000,0.203315891739130,0.199407622391304,0.212237044565217,0.196256215869565,0.219158143913043,0.219843655000000,0.205206947391304,0.211565083478261,0.205039677173913,0.216640556956522,0.212703409565217,0.216854104782609,0.227427738478261,0.211492077826087,0.211276951739130,0.222220547391304,0.205467882608696,0.213885426956522,0.210617451739130,0.212537884347826,0.209995171086956,0.203201280000000,0.206636360000000,0.230103828478261,0.221489365652174,0.233521916739130,0.216636925217391,0.220570608913043,0.222563230869565,0.225683163478261,0.216961167608696,0.209134979565217,0.203724162826087,0.211923396956522,0.212393098478261,0.195881415869565,0.206922522608696,0.226610304782609,0.222077400652174,0.222924003695652,0.216635233478261,0.193838096304348,0.232822334565217,0.217516287826087,0.205584031304348,0.232067079347826,0.206627482608696,0.225899401739130,0.209650315217391,0.211961136521739,0.194645654782609,0.221243869782609,0.207478902608696,0.244232965217391,0.232719183478261,0.241258364565217,0.217104985217391,0.218923096304348,0.229144390000000,0.231523128695652,0.210365521739130,0.235849403043478,0.209486568695652,0.200135999130435,0.230611815217391,0.213991819130435,0.228970775217391,0.206657047608696,0.201899466956522,0.206701831956522,0.197391623043478,0.215300259347826,0.238141643695652,0.215176203913044,0.223435032173913,0.217417840434783,0.228147519347826,0.197618849565217,0.193209606956522,0.204340636304348,0.221343065869565,0.208009667608696,0.203448151086957,0.212986914130435,0.242347791521739,0.235763171304348,0.212637269347826,0.232479353913043,0.226046643043478,0.217716839347826,0.225792615434783,0.215613810869565,0.203873060000000,0.222479231956522,0.223951762391304,0.216501092608696,0.215149785652174,0.225928767826087,0.211403658478261,0.209040015652174,0.224994651739130,0.207372013913043,0.233457816956522,0.209369883478261,0.219481464130435,0.209431868478261,0.204547995217391,0.216697321086957,0.218729353478261,0.201924172391304,0.197094713478261,0.219314805217391,0.227043017826087,0.210284721304348,0.224405515652174,0.218687250869565,0.225770257173913,0.226512009130435,0.193030951521739,0.239711611304348,0.209290892173913,0.228568386956522,0.224831780434783,0.226156766521739,0.207983448478261,0.224298719130435,0.213896895434783,0.234291353695652,0.213059134130435,0.215976529130435,0.246510281739130,0.204186065000000,0.211404376956522,0.198471646956522,0.221358261304348,0.212392984130435,0.215497766086957,0.215950279347826,0.230029198260870,0.221598273043478,0.214389539347826,0.192030024782609,0.208883317391304,0.219556450000000,0.193208654130435,0.218067045652174,0.191229254130435,0.218271396521739,0.203818705434783,0.223182641304348,0.186311527826087,0.200338441521739,0.206812511304348,0.207718120652174,0.221374518913043,0.241027930434783,0.206090774130435,0.214726748695652,0.194880695217391,0.205094717173913,0.217169112173913,0.216244672173913,0.229400679782609,0.205603273913043,0.202051511304348,0.210080106521739,0.224903248913043,0.212453031956522,0.215201953913043,0.225588170869565,0.238118722391304,0.217963253478261,0.217250653913043,0.213026586739130,0.215660081521739,0.219623385652174,0.221542988043478,0.209335647608696,0.201435735652174,0.209420610652174,0.228772458043478,0.223478414565217,0.202790844565217,0.204039096739130,0.202225021304348,0.232722150000000,0.229789944565217,0.213360324565217,0.224095041304348,0.219931514565217,0.197292348478261,0.219703541304348,0.224504927173913,0.219347940434783,0.221689648695652,0.222701535434783,0.203126056739130,0.214539822391304,0.247938370869565,0.223043541086956,0.225424905217391,0.238389448043478,0.201357779565217,0.207837655217391,0.224423871086957,0.207391119565217,0.217238455000000,0.224824274130435,0.215100977173913,0.214906254130435,0.222693021956522,0.214945320869565,0.203162427826087,0.206930041086957,0.210721948913043,0.206881004782609,0.210286685652174,0.211718077608696,0.206703263043478,0.222578336739130,0.207138936521739,0.211111221086956,0.223233365000000,0.220339030000000,0.214751100217391,0.189740567826087,0.224296717173913,0.219725853043478,0.220806556304348];
%meanset = sort(meanset);
varset = var(X);
%lamda = [0.1,0.5,0.9,1.5,2,2.5,3,3.5,4,4.5,5,5.5,6,7,8,9];
lamda = [3.5];
for i = 1:numel(varset)
    if varset(i) == 0
        varset(i) = 0.001;
    end
end
%for M = 2:50 %compare differnt M
for l = 1:numel(lamda)
%for M = 5:5:50 %compare lamda with different M
M = 25;
designmatrix = ones(numberoftrainingdata,1);
for i = 1:M-1
    tmp = X;
    for m = 1:numberoffeatures
        %test1 = tmp;
        tmp(:,m) = -(tmp(:,m)-meanset((i-1)*46+m)).*(tmp(:,m)-meanset((i-1)*46+m));
        %test2 = tmp;
        %test3 = tmp(:,m)/(2*varset(m));
        tmp(:,m) = exp(tmp(:,m)/(2*varset(m)));
        %test4 = tmp;
    end
    designmatrix = cat(2,designmatrix,tmp);   
end

I = eye((M-1)*numberoffeatures+1,(M-1)*numberoffeatures+1);
Wml{M} = ((inv(0.001.*I + designmatrix'*designmatrix))*designmatrix')*T;
WmlR{M} = ((inv(lamda(l).*I + designmatrix'*designmatrix))*designmatrix')*T;
EDW = 0;
EDWR = 0;
for i = 1:numberoftrainingdata
    EDW = EDW + (T(i) - Wml{M}'*designmatrix(i,:)')^2;
    EDWR = EDWR + (T(i) - WmlR{M}'*designmatrix(i,:)')^2;
end
EDW = EDW/2;
EDWR = EDWR/2;
ERMS(M-1) = sqrt(2*EDW/numberoftrainingdata);
ERMSR(M-1) = sqrt(2*EDWR/numberoftrainingdata);
%end
%lam{l} = WmlR;
end
